---
title: 计算机网络复习 - 无线和移动网络
toc: true
comments: true
math: true
date: 2021-03-01 17:23:12
tags: 计算机网络
categories: 复习笔记
---

# IEEE 802.11 无线局域网

**802.11 无线局域网架构：**

802.11 无线 LAN 的基本组成单元是基本服务集（BSS）

<!-- more -->
一个 BSS 包括:
- 若干无线终端
- 一个无线接入点 AP
每个无线接口（终端及 AP）均有一个全局唯一的 MAC 地址

  {% asset_img 1.PNG This is an 802.11 image %}
**802.11 信道与关联：**

802.11 将通信频段划分成若干信道，每个 BSS 分配一个信道：
- 管理员安装 AP 时，为 AP 分配一个**服务集标识符（SSID）**，并选择 AP 使用的信道
- 相邻 AP 使用的信道**可能相互干扰**
主机**必须与一个 AP 关联**：
- 扫描信道，监听各个 AP 发送的信标帧（包含 AP 的 SSID 和 MAC 地址）

    > 主动扫描：
    >
    > 1. 主机广播**探测请求帧**
    > 2. AP 发送探测**响应**帧
    > 3. 主机从收到的探测响应中**选择一个 AP 发送关联请求**
    > 4. AP 发送关联响应帧
    >
    > 被动扫描：
    >
    > 1. 主机监听 AP 发送的信标帧
    > 2. 主机选择一个 AP 发送关联请求帧
    > 3. AP 向主机发送关联响应帧

- 选择一个 AP 进行关联（可能需要身份鉴别）

- 使用 DHCP 获得 AP 所在子网中的一个IP地址

# 802.11: 多路访问控制

802.11：基于 CSMA - 发送数据前监听信道。

特点：发前监听，边发边听（最小帧长），冲突避让（BEB）。

- 避免与正在进行传输的其他结点冲突

802.11：不能像 CSMA/CD 那样，边发送，边检测冲突。

- 无线信道很难实现：无线网络中，信号强度急剧衰减。

- 无法侦听到所有可能的冲突：隐藏站、信号衰落

    > 例如：
    >
    >   {% asset_img 2.PNG This is an 802.11eg image %}
    >
    > A-B、B-C 之间可以正常传输，A/C 之间有障碍物，遮挡了信号的传播，导致 A-C 之间的信号无法传输，若 A,C 同时和 B 传输数据，则会出现冲突。

- 目标：**避免冲突 CSMA/C(illision)A(voidance)** （只能避免数据帧的冲突）

##  MAC 协议：CSMA/CA

### sender/receiver 工作流程

**802.11 sender：**

1. if 监听信道空闲了 **DIFS** 时间 then

    发送整个帧（无同时检测冲突，即 CD（collision detection）

2. if 监听到信道忙 then

    开始随机退避计时

    信道忙，计时冻结

    当信道空闲时，计时器倒计时

    当计时器超时时，发送帧

    **if 没有收到 ACK then**

    ​	增加随机退避的间隔时间

    重复第 2 步

**802.11 receiver：**

- if 正确接收帧

    延迟 SIFS（< DIFS） 时间之后，向发送端发送 ACK （由于存在隐藏站问题）

> 802.11 利用帧间间隔时间的长短来区分数据的优先级，间隔时间越长，优先级越低。
>
> 例如，DIFS 比 SIFS 长，说明 数据帧（data）的优先级低于 ACK 的优先级。

  {% asset_img 3.PNG This is an sender-receiver image %}

### 如何实现冲突避免？

**基本思想：**

允许发送端 **预约** 信道，而不是随机发送数据帧，从而避免长数据帧的冲突。

- 发送端首先利用  CSMA 向 BS（基站） 发送一个**很短**的 **RTS** 帧

    RTS （request to send）帧仍然有可能彼此冲突，但 RTS 帧很短，

- BS 广播一个 **CTS**（clear to send） 帧作为对 RTS 的响应

- CTS 可以被 **所有节点** 接收

    可以消除隐藏站的影响

    发送端可以发送数据帧

    其他结点推迟发送

**利用很小的预约帧，彻底避免数据帧冲突。**

举个栗子：

  {% asset_img 4.PNG This is an e.g. image %}



### 802.11 MAC 帧

  {% asset_img 5.PNG This is an MACframe image %}

  {% asset_img 6.PNG This is an MACframe2 image %}